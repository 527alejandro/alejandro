"format register";System.register("angular2/src/alt_router/segments",["angular2/src/facade/collection","angular2/src/facade/lang"],!0,function(t,e,r){function n(t){return t._root}function a(t,e){if(t instanceof S&&u(t,e.value))return e;if(t===e.value)return e;for(var r=0,n=e.children;r<n.length;r++){var o=n[r],i=a(t,o);if(m.isPresent(i))return i}return null}function o(t,e,r){if(r.push(e),t instanceof S&&u(t,e.value))return r;if(t===e.value)return r;for(var n=0,a=e.children;n<a.length;n++){var i=a[n],s=o(t,i,h.ListWrapper.clone(r));if(m.isPresent(s))return s}return null}function i(t){var e="";return m.isPresent(t)&&h.StringMapWrapper.forEach(t,function(t,r){return e+=";"+r+"="+t}),e}function s(t){return l(t._root)}function l(t){var e=t.value,r=t.children.map(function(t){return l(t)}).join(", ");return e.outlet+":"+e.stringifiedUrlSegments+"("+m.stringify(e.type)+") ["+r+"]"}function u(t,e){return m.isBlank(t)&&!m.isBlank(e)?!1:!m.isBlank(t)&&m.isBlank(e)?!1:t._type!==e._type?!1:m.isBlank(t.parameters)&&!m.isBlank(e.parameters)?!1:!m.isBlank(t.parameters)&&m.isBlank(e.parameters)?!1:m.isBlank(t.parameters)&&m.isBlank(e.parameters)?!0:h.StringMapWrapper.equals(t.parameters,e.parameters)}function c(t){return t._componentFactory}var p=System.global,f=p.define;p.define=void 0;var g=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},h=t("angular2/src/facade/collection"),m=t("angular2/src/facade/lang"),d=function(){function t(t){this._root=t}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root.value},enumerable:!0,configurable:!0}),t.prototype.parent=function(t){var e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null},t.prototype.children=function(t){var e=a(t,this._root);return m.isPresent(e)?e.children.map(function(t){return t.value}):null},t.prototype.firstChild=function(t){var e=a(t,this._root);return m.isPresent(e)&&e.children.length>0?e.children[0].value:null},t.prototype.pathFromRoot=function(t){return o(t,this._root,[]).map(function(t){return t.value})},t}();e.Tree=d;var _=function(t){function e(e){t.call(this,e)}return g(e,t),e}(d);e.UrlTree=_;var v=function(t){function e(e){t.call(this,e)}return g(e,t),e}(d);e.RouteTree=v,e.rootNode=n;var y=function(){function t(t,e){this.value=t,this.children=e}return t}();e.TreeNode=y;var b=function(){function t(t,e,r){this.segment=t,this.parameters=e,this.outlet=r}return t.prototype.toString=function(){var t=m.isBlank(this.outlet)?"":this.outlet+":",e=m.isBlank(this.segment)?"":this.segment;return""+t+e+i(this.parameters)},t}();e.UrlSegment=b;var S=function(){function t(t,e,r,n,a){this.urlSegments=t,this.parameters=e,this.outlet=r,this._type=n,this._componentFactory=a}return t.prototype.getParam=function(t){return m.isPresent(this.parameters)?this.parameters[t]:null},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stringifiedUrlSegments",{get:function(){return this.urlSegments.map(function(t){return t.toString()}).join("/")},enumerable:!0,configurable:!0}),t}();return e.RouteSegment=S,e.serializeRouteSegmentTree=s,e.equalSegments=u,e.routeSegmentComponentFactory=c,p.define=f,r.exports}),System.register("angular2/src/alt_router/metadata/metadata",["angular2/src/facade/lang"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=t("angular2/src/facade/lang"),i=function(){function t(){}return Object.defineProperty(t.prototype,"path",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"component",{get:function(){},enumerable:!0,configurable:!0}),t}();e.RouteMetadata=i;var s=function(){function t(t){var e=void 0===t?{}:t,r=e.path,n=e.component;this.path=r,this.component=n}return t.prototype.toString=function(){return"@Route("+this.path+", "+o.stringify(this.component)+")"},t}();e.Route=s;var l=function(){function t(t){this.routes=t}return t.prototype.toString=function(){return"@Routes("+this.routes+")"},t}();return e.RoutesMetadata=l,n.define=a,r.exports}),System.register("angular2/src/alt_router/constants",[],!0,function(t,e,r){var n=System.global,a=n.define;return n.define=void 0,e.DEFAULT_OUTLET_NAME="__DEFAULT",n.define=a,r.exports}),System.register("angular2/src/alt_router/link",["angular2/src/alt_router/segments","angular2/src/facade/lang","angular2/src/facade/collection"],!0,function(t,e,r){function n(t,e,r,n){if(0===n.length)return r;var l,u;h.isString(n[0])&&n[0].startsWith("./")?(u=["/",n[0].substring(2)].concat(n.slice(1)),l=o(a(t,e),g.rootNode(r))):h.isString(n[0])&&1===n.length&&"/"==n[0]?(u=n,l=g.rootNode(r)):h.isString(n[0])&&!n[0].startsWith("/")?(u=["/"].concat(n),l=o(a(t,e),g.rootNode(r))):(u=["/"].concat(n),l=g.rootNode(r));var c=s(l,u),p=i(g.rootNode(r),l,c);return new g.UrlTree(p)}function a(t,e){for(var r=t,n=null;h.isBlank(n);)n=m.ListWrapper.last(r.urlSegments),r=e.parent(r);return n}function o(t,e){if(e.value===t)return e;for(var r=0,n=e.children;r<n.length;r++){var a=n[r],i=o(t,a);if(h.isPresent(i))return i}return null}function i(t,e,r){return t===e?new g.TreeNode(t.value,r.children):new g.TreeNode(t.value,t.children.map(function(t){return i(t,e,r)}))}function s(t,e){var r=e.slice(1),n=c(e),a=u(e);if(h.isString(a)&&"/"==a[0]&&(a=a.substring(1)),h.isBlank(t)){var o=new g.UrlSegment(a,null,n),i=0===r.length?[]:[s(null,r)];return new g.TreeNode(o,i)}if(n!=t.value.outlet)return t;var o=h.isStringMap(a)?new g.UrlSegment(null,a,null):new g.UrlSegment(a,null,n);return 0===r.length?new g.TreeNode(o,[]):new g.TreeNode(o,l(m.ListWrapper.clone(t.children),r))}function l(t,e){var r=c(e),n=t.filter(function(t){return t.value.outlet==r});if(n.length>0){var a=n[0];t[t.indexOf(a)]=s(a,e)}else t.push(s(null,e));return t}function u(t){if(!h.isString(t[0]))return t[0];var e=t[0].toString().split(":");return e.length>1?e[1]:t[0]}function c(t){if(!h.isString(t[0]))return null;var e=t[0].toString().split(":");return e.length>1?e[0]:null}var p=System.global,f=p.define;p.define=void 0;var g=t("angular2/src/alt_router/segments"),h=t("angular2/src/facade/lang"),m=t("angular2/src/facade/collection");return e.link=n,p.define=f,r.exports}),System.register("angular2/src/alt_router/lifecycle_reflector",["angular2/src/facade/lang"],!0,function(t,e,r){function n(t,e){if(i.isBlank(e))return!1;var r=e.constructor;return r instanceof i.Type?t in r.prototype:!1}var a=System.global,o=a.define;a.define=void 0;var i=t("angular2/src/facade/lang");return e.hasLifecycleHook=n,a.define=o,r.exports}),System.register("angular2/src/alt_router/metadata/decorators",["angular2/src/alt_router/metadata/metadata","angular2/src/core/util/decorators"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=t("angular2/src/alt_router/metadata/metadata"),i=t("angular2/src/core/util/decorators");return e.Routes=i.makeDecorator(o.RoutesMetadata),n.define=a,r.exports}),System.register("angular2/src/alt_router/router_url_serializer",["angular2/src/alt_router/segments","angular2/src/facade/exceptions","angular2/src/facade/lang"],!0,function(t,e,r){function n(t){return""+t.value+o(t)}function a(t){var e=t[0].value.toString(),r=t.slice(1),a=r.length>0?"("+r.map(n).join("//")+")":"",i=o(t[0]);return""+e+a+i}function o(t){if(t.children.length>0){var e=g.isBlank(t.children[0].value.segment)?"":"/";return""+e+a(t.children)}return""}function i(t){var e=g.RegExpWrapper.firstMatch(d,t);return g.isPresent(e)?e[0]:""}function s(t){var e=g.RegExpWrapper.firstMatch(_,t);return g.isPresent(e)?e[0]:""}var l=System.global,u=l.define;l.define=void 0;var c=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},p=t("angular2/src/alt_router/segments"),f=t("angular2/src/facade/exceptions"),g=t("angular2/src/facade/lang"),h=function(){function t(){}return t}();e.RouterUrlSerializer=h;var m=function(t){function e(){t.apply(this,arguments)}return c(e,t),e.prototype.parse=function(t){var e=(new v).parse(t);return new p.UrlTree(e)},e.prototype.serialize=function(t){return n(p.rootNode(t))},e}(h);e.DefaultRouterUrlSerializer=m;var d=g.RegExpWrapper.create("^[^\\/\\(\\)\\?;=&#]+"),_=g.RegExpWrapper.create("^[^\\(\\)\\?;&#]+"),v=function(){function t(){}return t.prototype.peekStartsWith=function(t){return this._remaining.startsWith(t)},t.prototype.capture=function(t){if(!this._remaining.startsWith(t))throw new f.BaseException('Expected "'+t+'".');this._remaining=this._remaining.substring(t.length)},t.prototype.parse=function(t){return this._remaining=t,""==t||"/"==t?new p.TreeNode(new p.UrlSegment("",null,null),[]):this.parseRoot()},t.prototype.parseRoot=function(){var t=this.parseSegments(),e=this.peekStartsWith("?")?this.parseQueryParams():null;return new p.TreeNode(new p.UrlSegment("",e,null),t)},t.prototype.parseSegments=function(t){if(void 0===t&&(t=null),0==this._remaining.length)return[];this.peekStartsWith("/")&&this.capture("/");var e=i(this._remaining);if(this.capture(e),e.indexOf(":")>-1){var r=e.split(":");t=r[0],e=r[1]}var n=null;this.peekStartsWith(";")&&(n=this.parseMatrixParams());var a=[];this.peekStartsWith("(")&&(a=this.parseAuxiliaryRoutes());var o=[];if(this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),o=this.parseSegments()),g.isPresent(n)){var s=new p.UrlSegment(null,n,null),l=new p.TreeNode(s,o),u=new p.UrlSegment(e,null,t);return[new p.TreeNode(u,[l].concat(a))]}var u=new p.UrlSegment(e,null,t),c=new p.TreeNode(u,o);return[c].concat(a)},t.prototype.parseQueryParams=function(){var t={};for(this.capture("?"),this.parseQueryParam(t);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseQueryParam(t);return t},t.prototype.parseMatrixParams=function(){for(var t={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(t);return t},t.prototype.parseParam=function(t){var e=i(this._remaining);if(!g.isBlank(e)){this.capture(e);var r="true";if(this.peekStartsWith("=")){this.capture("=");var n=i(this._remaining);g.isPresent(n)&&(r=n,this.capture(r))}t[e]=r}},t.prototype.parseQueryParam=function(t){var e=i(this._remaining);if(!g.isBlank(e)){this.capture(e);var r="true";if(this.peekStartsWith("=")){this.capture("=");var n=s(this._remaining);g.isPresent(n)&&(r=n,this.capture(r))}t[e]=r}},t.prototype.parseAuxiliaryRoutes=function(){var t=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)t=t.concat(this.parseSegments("aux")),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),t},t}();return l.define=u,r.exports}),System.register("angular2/src/platform/browser/location/platform_location",[],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=function(){function t(){}return Object.defineProperty(t.prototype,"pathname",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return null},enumerable:!0,configurable:!0}),t}();return e.PlatformLocation=o,n.define=a,r.exports}),System.register("angular2/src/platform/browser/location/location_strategy",["angular2/core"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=t("angular2/core"),i=function(){function t(){}return t}();return e.LocationStrategy=i,e.APP_BASE_HREF=new o.OpaqueToken("appBaseHref"),n.define=a,r.exports}),System.register("angular2/src/platform/browser/location/location",["angular2/src/facade/async","angular2/core","angular2/src/platform/browser/location/location_strategy"],!0,function(t,e,r){function n(t,e){return t.length>0&&e.startsWith(t)?e.substring(t.length):e}function a(t){return/\/index.html$/g.test(t)?t.substring(0,t.length-11):t}var o=System.global,i=o.define;o.define=void 0;var s=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(3>o?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},l=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},u=t("angular2/src/facade/async"),c=t("angular2/core"),p=t("angular2/src/platform/browser/location/location_strategy"),f=function(){function t(e){var r=this;this.platformStrategy=e,this._subject=new u.EventEmitter;var n=this.platformStrategy.getBaseHref();this._baseHref=t.stripTrailingSlash(a(n)),this.platformStrategy.onPopState(function(t){u.ObservableWrapper.callEmit(r._subject,{url:r.path(),pop:!0,type:t.type})})}return t.prototype.path=function(){return this.normalize(this.platformStrategy.path())},t.prototype.normalize=function(e){return t.stripTrailingSlash(n(this._baseHref,a(e)))},t.prototype.prepareExternalUrl=function(t){return t.length>0&&!t.startsWith("/")&&(t="/"+t),this.platformStrategy.prepareExternalUrl(t)},t.prototype.go=function(t,e){void 0===e&&(e=""),this.platformStrategy.pushState(null,"",t,e)},t.prototype.replaceState=function(t,e){void 0===e&&(e=""),this.platformStrategy.replaceState(null,"",t,e)},t.prototype.forward=function(){this.platformStrategy.forward()},t.prototype.back=function(){this.platformStrategy.back()},t.prototype.subscribe=function(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=null),u.ObservableWrapper.subscribe(this._subject,t,e,r)},t.normalizeQueryParams=function(t){return t.length>0&&"?"!=t.substring(0,1)?"?"+t:t},t.joinWithSlash=function(t,e){if(0==t.length)return e;if(0==e.length)return t;var r=0;return t.endsWith("/")&&r++,e.startsWith("/")&&r++,2==r?t+e.substring(1):1==r?t+e:t+"/"+e},t.stripTrailingSlash=function(t){return/\/$/g.test(t)&&(t=t.substring(0,t.length-1)),t},t=s([c.Injectable(),l("design:paramtypes",[p.LocationStrategy])],t)}();return e.Location=f,o.define=i,r.exports}),System.register("angular2/src/platform/browser/location/path_location_strategy",["angular2/core","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/platform/browser/location/platform_location","angular2/src/platform/browser/location/location_strategy","angular2/src/platform/browser/location/location"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(3>o?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},l=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}},u=t("angular2/core"),c=t("angular2/src/facade/lang"),p=t("angular2/src/facade/exceptions"),f=t("angular2/src/platform/browser/location/platform_location"),g=t("angular2/src/platform/browser/location/location_strategy"),h=t("angular2/src/platform/browser/location/location"),m=function(t){function e(e,r){if(t.call(this),this._platformLocation=e,c.isBlank(r)&&(r=this._platformLocation.getBaseHrefFromDOM()),c.isBlank(r))throw new p.BaseException("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}return o(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.prepareExternalUrl=function(t){return h.Location.joinWithSlash(this._baseHref,t)},e.prototype.path=function(){return this._platformLocation.pathname+h.Location.normalizeQueryParams(this._platformLocation.search)},e.prototype.pushState=function(t,e,r,n){var a=this.prepareExternalUrl(r+h.Location.normalizeQueryParams(n));this._platformLocation.pushState(t,e,a)},e.prototype.replaceState=function(t,e,r,n){var a=this.prepareExternalUrl(r+h.Location.normalizeQueryParams(n));this._platformLocation.replaceState(t,e,a)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e=i([u.Injectable(),l(1,u.Optional()),l(1,u.Inject(g.APP_BASE_HREF)),s("design:paramtypes",[f.PlatformLocation,String])],e)}(g.LocationStrategy);return e.PathLocationStrategy=m,n.define=a,r.exports}),System.register("angular2/src/alt_router/directives/router_outlet",["angular2/core","angular2/src/alt_router/router","angular2/src/alt_router/constants","angular2/src/facade/lang"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(3>o?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},i=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},s=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}},l=t("angular2/core"),u=t("angular2/src/alt_router/router"),c=t("angular2/src/alt_router/constants"),p=t("angular2/src/facade/lang"),f=function(){function t(t,e,r){this._location=e,t.registerOutlet(p.isBlank(r)?c.DEFAULT_OUTLET_NAME:r,this)}return t.prototype.unload=function(){this._loaded.destroy(),this._loaded=null},Object.defineProperty(t.prototype,"loadedComponent",{get:function(){return p.isPresent(this._loaded)?this._loaded.instance:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return p.isPresent(this._loaded)},enumerable:!0,configurable:!0}),t.prototype.load=function(t,e,r){this.outletMap=r;var n=l.ReflectiveInjector.fromResolvedProviders(e,this._location.parentInjector);return this._loaded=this._location.createComponent(t,this._location.length,n,[]),this._loaded},t=o([l.Directive({selector:"router-outlet"}),s(2,l.Attribute("name")),i("design:paramtypes",[u.RouterOutletMap,l.ViewContainerRef,String])],t)}();return e.RouterOutlet=f,n.define=a,r.exports}),System.register("angular2/src/alt_router/directives/router_link",["angular2/core","angular2/src/alt_router/router","angular2/src/alt_router/segments","angular2/src/facade/lang","angular2/src/facade/async"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(3>o?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},i=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},s=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}},l=t("angular2/core"),u=t("angular2/src/alt_router/router"),c=t("angular2/src/alt_router/segments"),p=t("angular2/src/facade/lang"),f=t("angular2/src/facade/async"),g=function(){function t(t,e){var r=this;this._routeSegment=t,this._router=e,this._changes=[],this._subscription=f.ObservableWrapper.subscribe(e.changes,function(t){r._updateTargetUrlAndHref()})}return t.prototype.ngOnDestroy=function(){f.ObservableWrapper.dispose(this._subscription)},Object.defineProperty(t.prototype,"routerLink",{set:function(t){this._changes=t,this._updateTargetUrlAndHref()},enumerable:!0,configurable:!0}),t.prototype.onClick=function(){return p.isString(this.target)&&"_self"!=this.target?!0:(this._router.navigate(this._changes,this._routeSegment),!1)},t.prototype._updateTargetUrlAndHref=function(){var t=this._router.createUrlTree(this._changes,this._routeSegment);p.isPresent(t)&&(this.href=this._router.serializeUrl(t))},o([l.Input(),i("design:type",String)],t.prototype,"target",void 0),o([l.HostBinding(),i("design:type",String)],t.prototype,"href",void 0),o([l.Input(),i("design:type",Array),i("design:paramtypes",[Array])],t.prototype,"routerLink",null),o([l.HostListener("click"),i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",Boolean)],t.prototype,"onClick",null),t=o([l.Directive({selector:"[routerLink]"}),s(0,l.Optional()),i("design:paramtypes",[c.RouteSegment,u.Router])],t)}();return e.RouterLink=g,n.define=a,r.exports}),System.register("angular2/src/alt_router/recognize",["angular2/src/alt_router/segments","angular2/src/alt_router/metadata/metadata","angular2/src/facade/lang","angular2/src/facade/collection","angular2/src/facade/promise","angular2/src/facade/exceptions","angular2/src/alt_router/constants","angular2/src/core/reflection/reflection"],!0,function(t,e,r){function n(t,e,r){var n=new R(e,[r.root],null,h.rootNode(r).children,[]);return i(t,n).then(function(t){return new h.RouteTree(t[0])})}function a(t,e,r){var n=p(e);if(d.isBlank(n))throw new y.BaseException("Component '"+d.stringify(e)+"' does not have route configuration");var a;try{a=l(n,r)}catch(s){return v.PromiseWrapper.reject(s,null)}var u=i(t,a),f=o(t,e,a.aux).then(c);return v.PromiseWrapper.all([u,f]).then(_.ListWrapper.flatten)}function o(t,e,r){var n=r.map(function(r){return a(t,e,r)});return v.PromiseWrapper.all(n).then(_.ListWrapper.flatten)}function i(t,e){return t.resolveComponent(e.component).then(function(r){var n=0===e.consumedUrlSegments.length||d.isBlank(e.consumedUrlSegments[0].outlet)?b.DEFAULT_OUTLET_NAME:e.consumedUrlSegments[0].outlet,a=new h.RouteSegment(e.consumedUrlSegments,e.parameters,n,e.component,r);return e.leftOverUrl.length>0?o(t,e.component,e.leftOverUrl).then(function(t){return[new h.TreeNode(a,t)]}):s(t,e.component).then(function(t){return[new h.TreeNode(a,t)]})})}function s(t,e){return t.resolveComponent(e).then(function(r){var n=p(e);if(d.isBlank(n))return[];var a=n.routes.filter(function(t){return""==t.path||"/"==t.path});return 0===a.length?v.PromiseWrapper.resolve([]):s(t,a[0].component).then(function(e){return t.resolveComponent(a[0].component).then(function(t){var r=new h.RouteSegment([],null,b.DEFAULT_OUTLET_NAME,a[0].component,t);return[new h.TreeNode(r,e)]})})})}function l(t,e){for(var r=0,n=t.routes;r<n.length;r++){var a=n[r],o=u(a,e);if(d.isPresent(o))return o}var i=t.routes.map(function(t){return"'"+t.path+"'"}).join(", ");throw new y.BaseException("Cannot match any routes. Current segment: '"+e.value+"'. Available routes: ["+i+"].")}function u(t,e){var r=t.path.startsWith("/")?t.path.substring(1):t.path;if("*"==r)return new R(t.component,[],null,[],[]);for(var n=r.split("/"),a={},o=[],i=null,s=null,l=e,u=0;u<n.length;++u){if(d.isBlank(l))return null;var c=n[u],p=u===n.length-1,f=u===n.length-2,g=c.startsWith(":");if(!g&&c!=l.value.segment)return null;p&&(s=l),f&&(i=l),g&&(a[c.substring(1)]=l.value.segment),o.push(l.value),l=_.ListWrapper.first(l.children)}d.isPresent(l)&&d.isBlank(l.value.segment)&&(i=s,s=l);var h=s.value.parameters,m=_.StringMapWrapper.merge(d.isBlank(h)?{}:h,a),v=d.isPresent(i)?i.children.slice(1):[];return new R(t.component,o,m,s.children,v)}function c(t){var e={};return t.forEach(function(t){var r=e[t.value.outlet];if(d.isPresent(r)){var n=r.stringifiedUrlSegments,a=t.value.stringifiedUrlSegments;throw new y.BaseException("Two segments cannot have the same outlet name: '"+n+"' and '"+a+"'.")}e[t.value.outlet]=t.value}),t}function p(t){var e=S.reflector.annotations(t).filter(function(t){return t instanceof m.RoutesMetadata});return _.ListWrapper.first(e)}var f=System.global,g=f.define;f.define=void 0;var h=t("angular2/src/alt_router/segments"),m=t("angular2/src/alt_router/metadata/metadata"),d=t("angular2/src/facade/lang"),_=t("angular2/src/facade/collection"),v=t("angular2/src/facade/promise"),y=t("angular2/src/facade/exceptions"),b=t("angular2/src/alt_router/constants"),S=t("angular2/src/core/reflection/reflection");e.recognize=n;var R=function(){function t(t,e,r,n,a){this.component=t,this.consumedUrlSegments=e,this.parameters=r,this.leftOverUrl=n,this.aux=a}return t}();return f.define=g,r.exports}),System.register("angular2/src/platform/browser/location/hash_location_strategy",["angular2/core","angular2/src/platform/browser/location/location_strategy","angular2/src/platform/browser/location/location","angular2/src/platform/browser/location/platform_location","angular2/src/facade/lang"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(3>o?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},l=this&&this.__param||function(t,e){return function(r,n){e(r,n,t)}},u=t("angular2/core"),c=t("angular2/src/platform/browser/location/location_strategy"),p=t("angular2/src/platform/browser/location/location"),f=t("angular2/src/platform/browser/location/platform_location"),g=t("angular2/src/facade/lang"),h=function(t){function e(e,r){t.call(this),this._platformLocation=e,this._baseHref="",g.isPresent(r)&&(this._baseHref=r)}return o(e,t),e.prototype.onPopState=function(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)},e.prototype.getBaseHref=function(){return this._baseHref},e.prototype.path=function(){var t=this._platformLocation.hash;return g.isPresent(t)||(t="#"),t.length>0?t.substring(1):t},e.prototype.prepareExternalUrl=function(t){var e=p.Location.joinWithSlash(this._baseHref,t);return e.length>0?"#"+e:e},e.prototype.pushState=function(t,e,r,n){var a=this.prepareExternalUrl(r+p.Location.normalizeQueryParams(n));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,e,a)},e.prototype.replaceState=function(t,e,r,n){var a=this.prepareExternalUrl(r+p.Location.normalizeQueryParams(n));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,a)},e.prototype.forward=function(){this._platformLocation.forward()},e.prototype.back=function(){this._platformLocation.back()},e=i([u.Injectable(),l(1,u.Optional()),l(1,u.Inject(c.APP_BASE_HREF)),s("design:paramtypes",[f.PlatformLocation,String])],e)}(c.LocationStrategy);return e.HashLocationStrategy=h,n.define=a,r.exports}),System.register("angular2/src/platform/browser/location/browser_platform_location",["angular2/src/core/di/decorators","angular2/src/platform/browser/location/platform_location","angular2/src/platform/dom/dom_adapter"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},i=this&&this.__decorate||function(t,e,r,n){var a,o=arguments.length,i=3>o?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(3>o?a(i):o>3?a(e,r,i):a(e,r))||i);return o>3&&i&&Object.defineProperty(e,r,i),i},s=this&&this.__metadata||function(t,e){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(t,e):void 0},l=t("angular2/src/core/di/decorators"),u=t("angular2/src/platform/browser/location/platform_location"),c=t("angular2/src/platform/dom/dom_adapter"),p=function(t){function e(){t.call(this),this._init()}return o(e,t),e.prototype._init=function(){this._location=c.DOM.getLocation(),this._history=c.DOM.getHistory()},Object.defineProperty(e.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),e.prototype.getBaseHrefFromDOM=function(){return c.DOM.getBaseHref()},e.prototype.onPopState=function(t){c.DOM.getGlobalEventTarget("window").addEventListener("popstate",t,!1)},e.prototype.onHashChange=function(t){c.DOM.getGlobalEventTarget("window").addEventListener("hashchange",t,!1)},Object.defineProperty(e.prototype,"pathname",{get:function(){return this._location.pathname},set:function(t){this._location.pathname=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),e.prototype.pushState=function(t,e,r){this._history.pushState(t,e,r)},e.prototype.replaceState=function(t,e,r){this._history.replaceState(t,e,r)},e.prototype.forward=function(){this._history.forward()},e.prototype.back=function(){this._history.back()},e=i([l.Injectable(),s("design:paramtypes",[])],e)}(u.PlatformLocation);return e.BrowserPlatformLocation=p,n.define=a,r.exports}),System.register("angular2/src/platform/location",["angular2/src/platform/browser/location/platform_location","angular2/src/platform/browser/location/location_strategy","angular2/src/platform/browser/location/hash_location_strategy","angular2/src/platform/browser/location/path_location_strategy","angular2/src/platform/browser/location/location"],!0,function(t,e,r){function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}var a=System.global,o=a.define;return a.define=void 0,n(t("angular2/src/platform/browser/location/platform_location")),n(t("angular2/src/platform/browser/location/location_strategy")),n(t("angular2/src/platform/browser/location/hash_location_strategy")),n(t("angular2/src/platform/browser/location/path_location_strategy")),n(t("angular2/src/platform/browser/location/location")),a.define=o,r.exports}),System.register("angular2/platform/common",["angular2/src/platform/location"],!0,function(t,e,r){function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}var a=System.global,o=a.define;return a.define=void 0,n(t("angular2/src/platform/location")),a.define=o,r.exports}),System.register("angular2/src/alt_router/router_providers_common",["angular2/core","angular2/platform/common","angular2/src/alt_router/router","angular2/src/alt_router/router_url_serializer","angular2/core","angular2/src/facade/exceptions"],!0,function(t,e,r){function n(t,e,r,n,a){if(0==t.componentTypes.length)throw new p.BaseException("Bootstrap at least one component before injecting Router.");var o=new l.Router(null,t.componentTypes[0],e,r,n,a);return t.registerDisposeListener(function(){return o.dispose()}),o}var a=System.global,o=a.define;a.define=void 0;var i=t("angular2/core"),s=t("angular2/platform/common"),l=t("angular2/src/alt_router/router"),u=t("angular2/src/alt_router/router_url_serializer"),c=t("angular2/core"),p=t("angular2/src/facade/exceptions");return e.ROUTER_PROVIDERS_COMMON=[l.RouterOutletMap,{provide:u.RouterUrlSerializer,useClass:u.DefaultRouterUrlSerializer},{provide:s.LocationStrategy,useClass:s.PathLocationStrategy},s.Location,{provide:l.Router,useFactory:n,deps:[c.ApplicationRef,i.ComponentResolver,u.RouterUrlSerializer,l.RouterOutletMap,s.Location]
}],a.define=o,r.exports}),System.register("angular2/src/alt_router/router_providers",["angular2/src/alt_router/router_providers_common","angular2/src/platform/browser/location/browser_platform_location","angular2/platform/common"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=t("angular2/src/alt_router/router_providers_common"),i=t("angular2/src/platform/browser/location/browser_platform_location"),s=t("angular2/platform/common");return e.ROUTER_PROVIDERS=[o.ROUTER_PROVIDERS_COMMON,{provide:s.PlatformLocation,useClass:i.BrowserPlatformLocation}],n.define=a,r.exports}),System.register("angular2/src/alt_router/router",["angular2/core","angular2/src/facade/lang","angular2/src/facade/collection","angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/exceptions","angular2/src/alt_router/recognize","angular2/src/alt_router/link","angular2/src/alt_router/segments","angular2/src/alt_router/lifecycle_reflector","angular2/src/alt_router/constants"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=t("angular2/core"),i=t("angular2/src/facade/lang"),s=t("angular2/src/facade/collection"),l=t("angular2/src/facade/async"),u=t("angular2/src/facade/collection"),c=t("angular2/src/facade/exceptions"),p=t("angular2/src/alt_router/recognize"),f=t("angular2/src/alt_router/link"),g=t("angular2/src/alt_router/segments"),h=t("angular2/src/alt_router/lifecycle_reflector"),m=t("angular2/src/alt_router/constants"),d=function(){function t(){this._outlets={}}return t.prototype.registerOutlet=function(t,e){this._outlets[t]=e},t}();e.RouterOutletMap=d;var _=function(){function t(t,e,r,n,a,o){this._rootComponent=t,this._rootComponentType=e,this._componentResolver=r,this._urlSerializer=n,this._routerOutletMap=a,this._location=o,this._changes=new l.EventEmitter,this._prevTree=this._createInitialTree(),this._setUpLocationChangeListener(),this.navigateByUrl(this._location.path())}return Object.defineProperty(t.prototype,"urlTree",{get:function(){return this._urlTree},enumerable:!0,configurable:!0}),t.prototype.navigateByUrl=function(t){return this._navigate(this._urlSerializer.parse(t))},t.prototype.navigate=function(t,e){return this._navigate(this.createUrlTree(t,e))},t.prototype.dispose=function(){l.ObservableWrapper.dispose(this._locationSubscription)},t.prototype._createInitialTree=function(){var t=new g.RouteSegment([new g.UrlSegment("",null,null)],null,m.DEFAULT_OUTLET_NAME,this._rootComponentType,null);return new g.RouteTree(new g.TreeNode(t,[]))},t.prototype._setUpLocationChangeListener=function(){var t=this;this._locationSubscription=this._location.subscribe(function(e){t._navigate(t._urlSerializer.parse(e.url))})},t.prototype._navigate=function(t){var e=this;return this._urlTree=t,p.recognize(this._componentResolver,this._rootComponentType,t).then(function(t){return new v(t,e._prevTree).load(e._routerOutletMap,e._rootComponent).then(function(r){r&&(e._prevTree=t,e._location.go(e._urlSerializer.serialize(e._urlTree)),e._changes.emit(null))})})},t.prototype.createUrlTree=function(t,e){if(i.isPresent(this._prevTree)){var r=i.isPresent(e)?e:this._prevTree.root;return f.link(r,this._prevTree,this.urlTree,t)}return null},t.prototype.serializeUrl=function(t){return this._urlSerializer.serialize(t)},Object.defineProperty(t.prototype,"changes",{get:function(){return this._changes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"routeTree",{get:function(){return this._prevTree},enumerable:!0,configurable:!0}),t}();e.Router=_;var v=function(){function t(t,e){this.currTree=t,this.prevTree=e,this.deactivations=[],this.performMutation=!0}return t.prototype.load=function(t,e){var r=this,n=i.isPresent(this.prevTree)?g.rootNode(this.prevTree):null,a=g.rootNode(this.currTree);return this.canDeactivate(a,n,t,e).then(function(o){return r.performMutation=!0,o&&r.loadChildSegments(a,n,t,[e]),o})},t.prototype.canDeactivate=function(t,e,r,n){var a=this;this.performMutation=!1,this.loadChildSegments(t,e,r,[n]);var o=l.PromiseWrapper.all(this.deactivations.map(function(t){return a.checkCanDeactivatePath(t)}));return o.then(function(t){return t.filter(function(t){return t}).length===t.length})},t.prototype.checkCanDeactivatePath=function(t){for(var e=this,r=l.PromiseWrapper.resolve(!0),n=function(t){r=r.then(function(r){return h.hasLifecycleHook("routerCanDeactivate",t)?t.routerCanDeactivate(e.prevTree,e.currTree):r})},a=0,o=s.ListWrapper.reversed(t);a<o.length;a++){var i=o[a];n(i)}return r},t.prototype.loadChildSegments=function(t,e,r,n){var a=this,o=i.isPresent(e)?e.children.reduce(function(t,e){return t[e.value.outlet]=e,t},{}):{};t.children.forEach(function(t){a.loadSegments(t,o[t.value.outlet],r,n),u.StringMapWrapper["delete"](o,t.value.outlet)}),u.StringMapWrapper.forEach(o,function(t,e){return a.unloadOutlet(r._outlets[e],n)})},t.prototype.loadSegments=function(t,e,r,n){var a=t.value,o=i.isPresent(e)?e.value:null,s=this.getOutlet(r,t.value);if(g.equalSegments(a,o))this.loadChildSegments(t,e,s.outletMap,n.concat([s.loadedComponent]));else if(this.unloadOutlet(s,n),this.performMutation){var l=new d,u=this.loadNewSegment(l,a,o,s);this.loadChildSegments(t,e,l,n.concat([u]))}},t.prototype.loadNewSegment=function(t,e,r,n){var a=o.ReflectiveInjector.resolve([o.provide(d,{useValue:t}),o.provide(g.RouteSegment,{useValue:e})]),i=n.load(g.routeSegmentComponentFactory(e),a,t);return h.hasLifecycleHook("routerOnActivate",i.instance)&&i.instance.routerOnActivate(e,r,this.currTree,this.prevTree),i.instance},t.prototype.getOutlet=function(t,e){var r=t._outlets[e.outlet];if(i.isBlank(r))throw e.outlet==m.DEFAULT_OUTLET_NAME?new c.BaseException("Cannot find default outlet"):new c.BaseException("Cannot find the outlet "+e.outlet);return r},t.prototype.unloadOutlet=function(t,e){var r=this;i.isPresent(t)&&t.isLoaded&&(u.StringMapWrapper.forEach(t.outletMap._outlets,function(t,n){return r.unloadOutlet(t,e)}),this.performMutation?t.unload():this.deactivations.push(e.concat([t.loadedComponent])))},t}();return n.define=a,r.exports}),System.register("angular2/alt_router",["angular2/src/alt_router/router","angular2/src/alt_router/segments","angular2/src/alt_router/metadata/decorators","angular2/src/alt_router/metadata/metadata","angular2/src/alt_router/router_url_serializer","angular2/src/alt_router/router_providers","angular2/src/alt_router/directives/router_outlet","angular2/src/alt_router/directives/router_link"],!0,function(t,e,r){var n=System.global,a=n.define;n.define=void 0;var o=t("angular2/src/alt_router/router");e.Router=o.Router,e.RouterOutletMap=o.RouterOutletMap;var i=t("angular2/src/alt_router/segments");e.RouteSegment=i.RouteSegment,e.UrlSegment=i.UrlSegment,e.Tree=i.Tree,e.UrlTree=i.UrlTree,e.RouteTree=i.RouteTree;var s=t("angular2/src/alt_router/metadata/decorators");e.Routes=s.Routes;var l=t("angular2/src/alt_router/metadata/metadata");e.Route=l.Route;var u=t("angular2/src/alt_router/router_url_serializer");e.RouterUrlSerializer=u.RouterUrlSerializer,e.DefaultRouterUrlSerializer=u.DefaultRouterUrlSerializer;var c=t("angular2/src/alt_router/router_providers");e.ROUTER_PROVIDERS=c.ROUTER_PROVIDERS;var p=t("angular2/src/alt_router/directives/router_outlet"),f=t("angular2/src/alt_router/directives/router_link");return e.ROUTER_DIRECTIVES=[p.RouterOutlet,f.RouterLink],n.define=a,r.exports});